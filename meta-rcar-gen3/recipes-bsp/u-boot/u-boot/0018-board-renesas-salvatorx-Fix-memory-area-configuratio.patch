From 2d5cb952533be7bd2fe3e43d3bffad2f1d0a5547 Mon Sep 17 00:00:00 2001
From: Hiroyuki Yokoyama <hiroyuki.yokoyama.vx@renesas.com>
Date: Tue, 1 Sep 2015 17:22:48 +0900
Subject: board: renesas: salvatorx: Fix memory area configuration

Signed-off-by: Hiroyuki Yokoyama <hiroyuki.yokoyama.vx@renesas.com>
---
 board/renesas/salvatorx/salvatorx.c |  2 +-
 include/configs/rcar-gen3-common.h  | 10 +++++++---
 2 files changed, 8 insertions(+), 4 deletions(-)

diff --git a/board/renesas/salvatorx/salvatorx.c b/board/renesas/salvatorx/salvatorx.c
index 079e588..083c073 100644
--- a/board/renesas/salvatorx/salvatorx.c
+++ b/board/renesas/salvatorx/salvatorx.c
@@ -94,7 +94,7 @@ int board_init(void)
 	u32 val;
 #endif
 	/* adress of boot parameters */
-	gd->bd->bi_boot_params = CONFIG_SYS_SDRAM_BASE + 0x100;
+	gd->bd->bi_boot_params = CONFIG_SYS_TEXT_BASE + 0x50000;
 
 	/* Init PFC controller */
 	r8a7795_pinmux_init();
diff --git a/include/configs/rcar-gen3-common.h b/include/configs/rcar-gen3-common.h
index ab9d56f..26cb18b 100644
--- a/include/configs/rcar-gen3-common.h
+++ b/include/configs/rcar-gen3-common.h
@@ -78,9 +78,13 @@
 #define CONFIG_SYS_BARGSIZE		512
 #define CONFIG_SYS_BAUDRATE_TABLE	{ 115200, 38400 }
 
-#define CONFIG_SYS_SDRAM_BASE		(RCAR_GEN3_SDRAM_BASE)
-#define CONFIG_SYS_SDRAM_SIZE		(RCAR_GEN3_UBOOT_SDRAM_SIZE)
-#define CONFIG_SYS_LOAD_ADDR		(CONFIG_SYS_SDRAM_BASE + 0x08080000 - 0x40)
+/* MEMORY */
+#define CONFIG_SYS_TEXT_BASE		0x49000000
+#define CONFIG_SYS_INIT_SP_ADDR		(CONFIG_SYS_TEXT_BASE + 0x7fff0)
+
+#define CONFIG_SYS_SDRAM_BASE		(0x40000000)
+#define CONFIG_SYS_SDRAM_SIZE		(1024u * 1024 * 1024)
+#define CONFIG_SYS_LOAD_ADDR		(0x48080000)
 #define CONFIG_NR_DRAM_BANKS		1
 
 #define CONFIG_SYS_MONITOR_BASE		0x00000000
-- 
1.8.3.2

