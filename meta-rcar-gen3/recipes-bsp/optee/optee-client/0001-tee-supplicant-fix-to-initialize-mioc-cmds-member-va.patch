From 6f6886768c1cc0553f610c99611a9e312e86e44e Mon Sep 17 00:00:00 2001
From: Jun Miyauchi <jun.miyauchi.sr@hitachi.com>
Date: Tue, 16 Mar 2021 21:23:47 +0900
Subject: [PATCH] tee-supplicant: fix to initialize mioc->cmds member variables

Use memset() to initialize structured variables.

Signed-off-by: Jun Miyauchi <jun.miyauchi.sr@hitachi.com>
Signed-off-by: Yoshifumi Hosoya <yoshifumi.hosoya.wj@renesas.com>
---
 tee-supplicant/src/rpmb.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/tee-supplicant/src/rpmb.c b/tee-supplicant/src/rpmb.c
index 29da690..6fa5f67 100644
--- a/tee-supplicant/src/rpmb.c
+++ b/tee-supplicant/src/rpmb.c
@@ -642,6 +642,9 @@ static uint32_t rpmb_data_req(int fd, struct rpmb_data_frame *req_frm,
 	if (!mioc)
 		return -ENOMEM;
 
+	memset(&mioc->cmds[0], 0, RPMB_MULTI_CMD_MAX_CMDS *
+		sizeof(struct mmc_ioc_cmd));
+
 	for (i = 1; i < req_nfrm; i++) {
 		if (req_frm[i].msg_type != msg_type) {
 			EMSG("All request frames shall be of the same type");
-- 
2.14.1

