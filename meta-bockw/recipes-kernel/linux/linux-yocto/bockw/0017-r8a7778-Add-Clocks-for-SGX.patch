From 3754117ce5fc3a8498d595a9e528d9111d0e7b94 Mon Sep 17 00:00:00 2001
From: Takanari Hayama <taki@igel.co.jp>
Date: Fri, 19 Apr 2013 13:33:43 +0900
Subject: [PATCH 17/17] r8a7778: Add Clocks for SGX.

This change adds clocks required for SGX on r87778.

Signed-off-by: Takanari Hayama <taki@igel.co.jp>
---
 arch/arm/mach-shmobile/clock-r8a7778.c |    8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/arch/arm/mach-shmobile/clock-r8a7778.c b/arch/arm/mach-shmobile/clock-r8a7778.c
index 4654565..3856e60 100644
--- a/arch/arm/mach-shmobile/clock-r8a7778.c
+++ b/arch/arm/mach-shmobile/clock-r8a7778.c
@@ -106,8 +106,8 @@ static struct clk div4_clks[DIV4_NR] = {
 
 enum { MSTP517, MSTP513, MSTP501,
 	MSTP410, MSTP408,
-	MSTP331, MSTP323,
-	MSTP107, MSTP103, MSTP100,
+	MSTP331, MSTP323, MSTP319,
+	MSTP107, MSTP105, MSTP103, MSTP100,
 	MSTP030,
 	MSTP029, MSTP028, MSTP027, MSTP026, MSTP025, MSTP024, MSTP023, MSTP022, MSTP021,
 	MSTP016, MSTP015, MSTP014,
@@ -122,7 +122,9 @@ static struct clk mstp_clks[MSTP_NR] = {
 	[MSTP408] = SH_CLK_MSTP32(&div4_clks[DIV4_S3], MSTPCR4,  8, 0), /* VPC */
 	[MSTP331] = SH_CLK_MSTP32(&div4_clks[DIV4_S4], MSTPCR3, 31, 0), /* MMC */
 	[MSTP323] = SH_CLK_MSTP32(&div4_clks[DIV4_P], MSTPCR3, 23, 0), /* SDHI0 */
+	[MSTP319] = SH_CLK_MSTP32(&div4_clks[DIV4_P], MSTPCR3, 19, 0), /* SCR */
 	[MSTP107] = SH_CLK_MSTP32(&div4_clks[DIV4_P], MSTPCR1,  7, 0), /* GP2D */
+	[MSTP105] = SH_CLK_MSTP32(&div4_clks[DIV4_S], MSTPCR1,  5, 0), /* SGX */
 	[MSTP103] = SH_CLK_MSTP32(&div4_clks[DIV4_S], MSTPCR1,  3, 0), /* DU */
 	[MSTP100] = SH_CLK_MSTP32(&div4_clks[DIV4_S], MSTPCR1,  0, CLK_ENABLE_ON_INIT), /* USB */
 	[MSTP030] = SH_CLK_MSTP32(&div4_clks[DIV4_P], MSTPCR0, 30, 0), /* I2C0 */
@@ -162,7 +164,9 @@ static struct clk_lookup lookups[] = {
 	CLKDEV_DEV_ID("uio_pdrv_genirq.1",	&mstp_clks[MSTP408]), /* VPC */
 	CLKDEV_DEV_ID("sh_mmcif",	&mstp_clks[MSTP331]), /* MMC */
 	CLKDEV_DEV_ID("sh_mobile_sdhi.0",	&mstp_clks[MSTP323]), /* SDHI0 */
+	CLKDEV_CON_ID("scr",		&mstp_clks[MSTP319]), /* SCR */
 	CLKDEV_DEV_ID("gp2d",		&mstp_clks[MSTP107]), /* GP2D */
+	CLKDEV_CON_ID("sgx",		&mstp_clks[MSTP105]), /* SGX */
 	CLKDEV_DEV_ID("rcar-du.0",	&mstp_clks[MSTP103]), /* DU */
 	CLKDEV_DEV_ID("sh_tmu.0",	&mstp_clks[MSTP016]), /* TMU00 */
 	CLKDEV_DEV_ID("sh_tmu.1",	&mstp_clks[MSTP016]), /* TMU01 */
-- 
1.7.9.5

